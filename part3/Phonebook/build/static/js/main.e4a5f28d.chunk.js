(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){e.exports=t(41)},41:function(e,n,t){"use strict";t.r(n);var a=t(18),r=t(17),o=t(2),l=t(0),c=t.n(l),s=function(e){var n=e.persons;return""!==e.newKey&&(n=e.persons.filter((function(n){return function(e,n){var t=e.toLowerCase(),a=n.toLowerCase();return t.includes(a)}(n.name,e.newKey)}))),c.a.createElement("div",null,n.map((function(n){return c.a.createElement(e.EachDeet,{setErr:e.setErr,persons:e.persons,setPersons:e.setPersons,key:n.id,id:n.id,person:n.name,number:n.number})})))},u=(t(7),function(e){return console.log("confirm ho raha bro"),null==e.message?null:(setTimeout((function(){e.setMessage(null)}),1e3),c.a.createElement("div",{className:"confirm"},c.a.createElement("p",null,e.message)))}),i=function(e){return console.log("error ho raha bro"),null==e.err?null:(setTimeout((function(){e.setErr(null)}),1e3),c.a.createElement("div",{className:"error"},c.a.createElement("p",null,e.err)))},m=function(e){var n=Object(l.useState)(""),t=Object(o.a)(n,2),a=t[0],r=t[1];return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement("form",null,c.a.createElement("div",null,"filter: ",c.a.createElement("input",{value:a,onChange:function(e){r(e.target.value)}}))),c.a.createElement(u,{setMessage:e.setMessage,message:e.message}),c.a.createElement(i,{setErr:e.setErr,err:e.err}),c.a.createElement("h2",null," Add new "),c.a.createElement("form",{onSubmit:e.addDeet},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:e.newName,onChange:e.handleName})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:e.newNum,onChange:e.handleNum})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))),c.a.createElement("h2",null,"Numbers"),c.a.createElement(s,{setErr:e.setErr,setPersons:e.setPersons,newKey:a,persons:e.persons,EachDeet:e.EachDeet}))},f=t(4),d=t.n(f),E="/api/persons",h=function(){return d.a.get(E)},g=function(e){return d.a.post(E,e)},p=function(e){return d.a.delete("".concat(E,"/").concat(e))},b=function(e,n){return d.a.put("".concat(E,"/").concat(e),n)},v=function(e,n,t,a,r){if(window.confirm("Confirm deletion?")){console.log("initial key is",e),n.preventDefault();var o="";t(a.filter((function(n){if(n.id!==e)return n;o=n}))),p(e).then((function(n){return console.log("deleted key",e)})).catch((function(e){r("".concat(o.id," is already deleted."))}))}},j=function(e){return console.log(),c.a.createElement("form",{onSubmit:function(n){return v(e.id,n,e.setPersons,e.persons,e.setErr)}},c.a.createElement("p",{style:{display:"inline-block"}},e.person," ",e.number),c.a.createElement("button",{type:"submit",style:{float:"right",height:"40%"}},"delete"))};var O=function(){var e=Object(l.useState)([]),n=Object(o.a)(e,2),t=n[0],s=n[1],u=Object(l.useState)(0),i=Object(o.a)(u,2),f=i[0],d=i[1];Object(l.useEffect)((function(){console.log("effect for fetch"),h().then((function(e){console.log("promise fulfilled"),s(e.data),console.log(e.data);var n;n=e.data.reduce((function(e,n){return e<n.id?n.id:e}),0),d(n>0?n+1:1),console.log("id set is",n)}))}),[]);var E=Object(l.useState)(""),p=Object(o.a)(E,2),v=p[0],O=p[1],w=Object(l.useState)(""),y=Object(o.a)(w,2),N=y[0],k=y[1],S=Object(l.useState)(null),D=Object(o.a)(S,2),P=D[0],C=D[1],M=Object(l.useState)(null),K=Object(o.a)(M,2),J=K[0],L=K[1];return c.a.createElement(m,{setMessage:C,message:P,setErr:L,err:J,addDeet:function(e){e.preventDefault();var n=Object(r.a)(t);if(console.log(n),0===n.length||function(e,n){for(var t=0;t<n.length;t++)if(n[t].name===e)return console.log("yeah its duplicate"),!1;return!0}(v,n)){var o={name:v,number:N,id:f};g(o).then((function(e){console.log("added a dude with",f),n.push(o),s(n),C("Edit successful")})).catch((function(e){C(null),L(e.message)}))}else{var l=t.find((function(e){if(e.name===v)return e.id})),c={};n=t.map((function(e){return e.name===v?(c=Object(a.a)({},e,{number:N}),console.log(c,"is edit person"),c):e})),b(l.id,c).then((function(e){console.log("edited",v),s(n),C("Edit successful"),L(null)})).catch((function(e){C(null),L(e.message)}))}O(""),k("")},setPersons:s,newName:v,newNum:N,handleName:function(e){O(e.target.value),console.log(v)},handleNum:function(e){k(e.target.value),console.log(N)},persons:t,EachDeet:j})},w=t(16);t.n(w).a.render(c.a.createElement(O,null),document.getElementById("root"))},7:function(e,n,t){}},[[19,1,2]]]);
//# sourceMappingURL=main.e4a5f28d.chunk.js.map